<div class="container mx-auto">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">Service Redemption</h1>
    <p class="text-gray-600 mt-1">Verify customer and redeem services</p>
  </div>

  <!-- Step Indicator -->
  <div class="mb-8">
    <div class="flex items-center">
      <!-- Step 1: Verify Customer -->
      <div class="flex items-center">
        <div [class]="'w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ' + (currentStep === 'verify' ? 'bg-blue-600 text-white' : currentStep === 'chooseCoupon' || currentStep === 'redeem' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-600')">
          <span class="material-icons text-sm" *ngIf="currentStep !== 'verify'">check</span>
          <span *ngIf="currentStep === 'verify'">1</span>
        </div>
        <span [class]="'ml-2 text-sm font-medium ' + (currentStep === 'verify' ? 'text-blue-600' : currentStep === 'chooseCoupon' || currentStep === 'redeem' ? 'text-gray-600' : 'text-gray-400')">
          Verify Customer
        </span>
      </div>
      
      <!-- Connector 1 -->
      <div class="flex-1 h-0.5 mx-4" [class]="currentStep === 'chooseCoupon' || currentStep === 'redeem' ? 'bg-green-600' : 'bg-gray-300'"></div>
      
      <!-- Step 2: Choose Coupon -->
      <div class="flex items-center">
        <div [class]="'w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ' + (currentStep === 'chooseCoupon' ? 'bg-blue-600 text-white' : currentStep === 'redeem' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-600')">
          <span class="material-icons text-sm" *ngIf="currentStep === 'redeem'">check</span>
          <span *ngIf="currentStep !== 'redeem'">2</span>
        </div>
        <span [class]="'ml-2 text-sm font-medium ' + (currentStep === 'chooseCoupon' ? 'text-blue-600' : currentStep === 'redeem' ? 'text-gray-600' : 'text-gray-400')">
          Choose Coupon
        </span>
      </div>
      
      <!-- Connector 2 -->
      <div class="flex-1 h-0.5 mx-4" [class]="currentStep === 'redeem' ? 'bg-green-600' : 'bg-gray-300'"></div>
      
      <!-- Step 3: Redeem Service -->
      <div class="flex items-center">
        <div [class]="'w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ' + (currentStep === 'redeem' ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600')">
          3
        </div>
        <span [class]="'ml-2 text-sm font-medium ' + (currentStep === 'redeem' ? 'text-blue-600' : 'text-gray-400')">
          Redeem Service
        </span>
      </div>
    </div>
  </div>

  <!-- Step Content -->
  <div>
    <!-- Step 1: Verify Customer -->
    <app-verify-customer
      *ngIf="currentStep === 'verify'"
      (customerVerified)="onCustomerVerified($event)">
    </app-verify-customer>

    <!-- Step 2 & 3: Customer Coupons (Choose Coupon & Redeem Service) -->
    <app-customer-coupons
      *ngIf="(currentStep === 'chooseCoupon' || currentStep === 'redeem') && customerData"
      [coupons]="customerData.coupons"
      [customerId]="customerData.customerId"
      (couponSelected)="onCouponSelected()"
      (couponDeselected)="onCouponDeselected()"
      (redemptionComplete)="onRedemptionComplete($event)">
    </app-customer-coupons>
  </div>
</div>

