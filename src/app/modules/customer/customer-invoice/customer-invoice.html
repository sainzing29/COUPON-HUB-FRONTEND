<div class="customer-invoice-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="flex items-center justify-between mb-6">
      <div class="flex items-center">
        <button 
          (click)="goBack()"
          class="mr-4 p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors duration-200">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h1 class="text-2xl font-bold text-white">Customer Invoice</h1>
      </div>
      <div class="flex space-x-3">
        <button 
          (click)="printInvoice()"
          class="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors duration-200 flex items-center space-x-2">
          <i class="fas fa-print"></i>
          <span>Print</span>
        </button>
        <button 
          (click)="downloadInvoice()"
          class="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors duration-200 flex items-center space-x-2">
          <i class="fas fa-download"></i>
          <span>Download</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Invoice Content -->
  <div class="invoice-content">
    <div class="invoice-card">
      <!-- Invoice Header -->
      <div class="invoice-header">
        <div class="company-info">
          <div class="logo">
            <span class="logo-text">COUPON HUB</span>
          </div>
          <div class="company-details">
            <h2 class="company-name">Coupon Hub Services</h2>
            <p class="company-address">Dubai, UAE</p>
            <p class="company-contact">Email: info@couponhub.com</p>
          </div>
        </div>
        <div class="invoice-details">
          <h3 class="invoice-title">INVOICE</h3>
          <div class="invoice-meta">
            <div class="meta-row">
              <span class="meta-label">Invoice #:</span>
              <span class="meta-value">{{ invoiceNumber }}</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">Date:</span>
              <span class="meta-value">{{ invoiceDate }}</span>
            </div>
            <div class="meta-row">
              <span class="meta-label">Coupon #:</span>
              <span class="meta-value">{{ couponNumber }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Customer Information -->
      <div class="customer-section">
        <h4 class="section-title">Bill To:</h4>
        <div class="customer-info">
          <div class="customer-name">{{ customerName }}</div>
          <div class="customer-details">
            <div *ngIf="customerEmail" class="customer-detail">
              <i class="fas fa-envelope"></i>
              <span>{{ customerEmail }}</span>
            </div>
            <div *ngIf="customerPhone" class="customer-detail">
              <i class="fas fa-phone"></i>
              <span>{{ customerPhone }}</span>
            </div>
            <div *ngIf="customerAddress" class="customer-detail">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ customerAddress }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Invoice Items -->
      <div class="invoice-items-section">
        <h4 class="section-title">Services Included:</h4>
        <div class="items-table">
          <div class="table-header">
            <div class="col-service">Service</div>
            <div class="col-description">Description</div>
            <div class="col-status">Status</div>
          </div>
          <div class="table-body">
            <div 
              *ngFor="let item of invoiceItems; let i = index" 
              class="table-row"
              [class]="getStatusClass(item.status)">
              <div class="col-service">
                <div class="service-number">{{ i + 1 }}</div>
                <div class="service-name">{{ item.name }}</div>
              </div>
              <div class="col-description">{{ item.description }}</div>
              <div class="col-status">
                <div class="status-badge" [class]="getStatusClass(item.status)">
                  <i [class]="getStatusIcon(item.status)"></i>
                  <span>{{ getStatusText(item.status) }}</span>
                  <div *ngIf="item.redeemedDate" class="redeemed-date">
                    {{ item.redeemedDate }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Invoice Summary -->
      <div class="invoice-summary">
        <div class="summary-grid">
          <div class="summary-item">
            <span class="summary-label">Total Services:</span>
            <span class="summary-value">{{ invoiceItems.length }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Redeemed:</span>
            <span class="summary-value redeemed">{{ getRedeemedCount() }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Available:</span>
            <span class="summary-value available">{{ getAvailableCount() }}</span>
          </div>
          <div class="summary-item total">
            <span class="summary-label">Total Value:</span>
            <span class="summary-value">{{ getTotalValue() }}</span>
          </div>
        </div>
      </div>

      <!-- Invoice Footer -->
      <div class="invoice-footer">
        <div class="footer-note">
          <p><strong>Terms & Conditions:</strong></p>
          <ul>
            <li>All services are subject to availability</li>
            <li>Services must be redeemed within the validity period</li>
            <li>No cash refunds, only service credits</li>
            <li>For support, contact us at info@couponhub.com</li>
          </ul>
        </div>
        <div class="footer-signature">
          <div class="signature-line"></div>
          <p>Authorized Signature</p>
        </div>
      </div>
    </div>
  </div>
</div>
